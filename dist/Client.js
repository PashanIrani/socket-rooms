/*! For license information please see Client.js.LICENSE.txt */
!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.SocketRoomsClient=o():e.SocketRoomsClient=o()}(this,(()=>(()=>{"use strict";var __webpack_modules__={"./src/client/index.ts":(__unused_webpack_module,exports,__webpack_require__)=>{eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getJoinedRooms = exports.setResponse = exports.sendMessageToRoom = exports.joinRoom = exports.init = void 0;\nvar common_1 = __webpack_require__(/*! src/common */ \"./src/common/index.ts\");\nvar roomResponseCallbacks = {};\nvar setResponse = function (roomId, responseCallback) {\n    roomResponseCallbacks[roomId] = responseCallback;\n};\nexports.setResponse = setResponse;\nvar sendMessageToRoom = function (roomId, message) {\n    var _a = window.socketRooms, socket = _a.socket, me = _a.me;\n    if (me == null) {\n        console.error('Something went wrong, current session has not be initialized properly.');\n        return;\n    }\n    var md = new common_1.MessageData(me.id, message, roomId);\n    socket.emit(common_1.Events.SEND_MESSAGE, md);\n};\nexports.sendMessageToRoom = sendMessageToRoom;\nvar joinRoom = function (roomId, responseCallback) {\n    var _a = window.socketRooms, socket = _a.socket, me = _a.me;\n    socket.emit(common_1.Events.JOIN_ROOM, { roomId: roomId, member: me });\n    socket.on(common_1.Events.LISTEN_FOR_MESSAGES, function (data) {\n        if ((me === null || me === void 0 ? void 0 : me.id) == data.from)\n            return;\n        if (roomId in roomResponseCallbacks) {\n            responseCallback = roomResponseCallbacks[roomId];\n        }\n        if (responseCallback) {\n            responseCallback(data);\n        }\n        else {\n            console.error('Response callback not provided.');\n        }\n    });\n};\nexports.joinRoom = joinRoom;\nvar init = function (userProvidedSocket) {\n    window.socketRooms = { socket: null, me: null };\n    var _a = window.socketRooms, socket = _a.socket, me = _a.me;\n    var promise = new Promise(function (res, _) {\n        if (socket !== null && me !== null) {\n            res('Already Connected');\n            return;\n        }\n        userProvidedSocket.on('connect', function () {\n            window.socketRooms = { socket: userProvidedSocket, me: new common_1.Member(userProvidedSocket.id) };\n            res('Connected');\n        });\n    });\n    return promise;\n};\nexports.init = init;\nvar getJoinedRooms = function () {\n    return new Promise(function (res) {\n        var _a = window.socketRooms, socket = _a.socket, me = _a.me;\n        socket.emit(common_1.Events.GET_JOINED_ROOMS, { me: me });\n        socket.on(common_1.Events.GET_JOINED_ROOMS_RESPONSE, function (data) {\n            res(data);\n        });\n    });\n};\nexports.getJoinedRooms = getJoinedRooms;\n\n\n//# sourceURL=webpack://SocketRooms/./src/client/index.ts?")},"./src/common/Events.ts":(__unused_webpack_module,exports)=>{eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports[\"default\"] = {\n    JOIN_ROOM: 'join room',\n    SEND_MESSAGE: 'send message',\n    LISTEN_FOR_MESSAGES: 'listen for messages',\n    GET_JOINED_ROOMS: 'get joined rooms',\n    GET_JOINED_ROOMS_RESPONSE: 'get joined rooms response'\n};\n\n\n//# sourceURL=webpack://SocketRooms/./src/common/Events.ts?")},"./src/common/Member.ts":(__unused_webpack_module,exports)=>{eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Member = void 0;\nvar Member = (function () {\n    function Member(id) {\n        this.rooms = [];\n        this.id = id;\n    }\n    return Member;\n}());\nexports.Member = Member;\n\n\n//# sourceURL=webpack://SocketRooms/./src/common/Member.ts?')},"./src/common/MessageData.ts":(__unused_webpack_module,exports)=>{eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.MessageData = void 0;\nvar MessageData = (function () {\n    function MessageData(from, message, roomId) {\n        this.from = from;\n        this.message = message;\n        this.roomId = roomId;\n    }\n    return MessageData;\n}());\nexports.MessageData = MessageData;\n\n\n//# sourceURL=webpack://SocketRooms/./src/common/MessageData.ts?')},"./src/common/Room.ts":(__unused_webpack_module,exports)=>{eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Room = void 0;\nvar Room = (function () {\n    function Room(id, capacity) {\n        this.capacity = null;\n        this.members = [];\n        this.id = id;\n        if (capacity) {\n            this.capacity = capacity;\n        }\n    }\n    Room.prototype.hasMember = function (member) {\n        for (var i = 0; i < this.members.length; ++i) {\n            if (this.members[i].id === member.id)\n                return true;\n        }\n        return false;\n    };\n    Room.prototype.addMember = function (member) {\n        if (this.hasMember(member))\n            return false;\n        this.members.push(member);\n        return true;\n    };\n    Room.prototype.removeMember = function (id) {\n        this.members = this.members.filter(function (member) {\n            return member.id !== id;\n        });\n    };\n    return Room;\n}());\nexports.Room = Room;\n\n\n//# sourceURL=webpack://SocketRooms/./src/common/Room.ts?')},"./src/common/index.ts":function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Events = exports.Member = exports.MessageData = exports.Room = void 0;\nvar Room_1 = __webpack_require__(/*! ./Room */ "./src/common/Room.ts");\nObject.defineProperty(exports, "Room", ({ enumerable: true, get: function () { return Room_1.Room; } }));\nvar MessageData_1 = __webpack_require__(/*! ./MessageData */ "./src/common/MessageData.ts");\nObject.defineProperty(exports, "MessageData", ({ enumerable: true, get: function () { return MessageData_1.MessageData; } }));\nvar Member_1 = __webpack_require__(/*! ./Member */ "./src/common/Member.ts");\nObject.defineProperty(exports, "Member", ({ enumerable: true, get: function () { return Member_1.Member; } }));\nvar Events_1 = __importDefault(__webpack_require__(/*! ./Events */ "./src/common/Events.ts"));\nexports.Events = Events_1.default;\n\n\n//# sourceURL=webpack://SocketRooms/./src/common/index.ts?')}},__webpack_module_cache__={};function __webpack_require__(e){var o=__webpack_module_cache__[e];if(void 0!==o)return o.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}var __webpack_exports__=__webpack_require__("./src/client/index.ts");return __webpack_exports__})()));